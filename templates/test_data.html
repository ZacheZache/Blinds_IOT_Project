<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>{{ title }}</title>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js'></script>
</head>

<body>
<center>
    <br/>
    <h1>Manual Blind Controls</h1>
    <h3>Enter the position for the blinds:</h3>

    <form>
    <button type="submit" formaction="http://127.0.0.1:1880/test_data_zache" formmethod="post" name="manual_override" value=0>Fully closed</button>
    </form>

    <form>
    <button type="submit" formaction="http://127.0.0.1:1880/test_data_zache" formmethod="post" name="manual_override" value=25>25% Open</button>
    </form>

    <form>
    <button type="submit" formaction="http://127.0.0.1:1880/test_data_zache" formmethod="post" name="manual_override" value=50>50% Open</button>
    </form>

    <form>
    <button type="submit" formaction="http://127.0.0.1:1880/test_data_zache" formmethod="post" name="manual_override" value=75>75% Open</button>
    </form>

    <form>
    <button type="submit" formaction="http://127.0.0.1:1880/test_data_zache" formmethod="post" name="manual_override" value=100>Fully Open</button>
    </form>

    <form>
    <button type="submit" formaction="http://127.0.0.1:1880/test_data_zache" formmethod="post" name="manual_override" value="420">Go back to auto</button>
    </form>

    <br/>
    <center>
        <!--DEVICE-->
        <h1>Blind positions</h1>
        <canvas id="canvas" width="900" height="400"></canvas>


        <br/>
        <!--ENVIRONMENT DATA-->
        <h1>Sun azimuth</h1>

        <canvas id="chart" width="900" height="400"></canvas>
    </center>

    <br/>

</center>
<script>
          var blindChartData = {
        labels : [
          {% for item in blind_dates %}
            "{{ item }}",
          {% endfor %}
        ],
        datasets : [
            {
                type: 'line',
                label: "Blind",
                lineTension: 0.0,
                backgroundColor: 'rgba(151,249,190,0.5)',
                borderColor: 'rgba(151,249,190,1)',
                borderWidth: 1,
                data : [
	    {% for item in blindpositions %}
              {{ item }},
            {% endfor %}]
          }
	]
    }

    var lineChartData = {
        labels : [
          {% for item in times %}
            "{{ item }}",
          {% endfor %}
        ],
        datasets : [
            {
                type: 'line',
                label: "Azimuth",
                backgroundColor: 'rgba(0,100,255,0.5)',
                borderColor: 'rgba(0,100,255,1)',
                borderWidth: 1,
                data : [
	    {% for pos in positions %}
              {{ pos }},
            {% endfor %}]
          },
          {
                type: 'line',
                label: "Sun in window",
                backgroundColor: 'rgba(255,255,0,0.01)',
                borderColor: 'rgba(255,255,0,1)',
                borderWidth: 1,
                data : [
	    {% for sun in sun_status %}
              {{ sun }},
            {% endfor %}]
          }
	]
    }

    window.onload = function() {
    var ctx = document.getElementById('canvas').getContext('2d');
    window.myBar = new Chart(ctx, {
        type: 'line',
        data: blindChartData,
        options: {
            responsive: false,
            scales: {
      yAxes: [{
        ticks: {
          max: 100,
          min: 0,
          reverse: false,
          stepSize: 25
        },
      }]
    },
            legend: {
                position: 'top',
            }
        }
    });

    var ctx2 = document.getElementById('chart').getContext('2d');
    window.myBar = new Chart(ctx2, {
        type: 'line',
        data: lineChartData,
        options: {
            responsive: false,
            scales: {
      yAxes: [{
        ticks: {
          max: 360,
          min: 0,
          reverse: false,
          stepSize: 20
        },
      }]
    },
            legend: {
                position: 'top',
            }
        }
    });
};
</script>
</body>
</html>